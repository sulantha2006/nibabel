<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">


<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Neuroimaging in Python &#8212; NiBabel 2.1.1dev documentation</title>
    
    <link rel="stylesheet" href="../_static/nibabel.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '2.1.1dev',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    <link rel="top" title="NiBabel 2.1.1dev documentation" href="../index.html" />
    <link rel="up" title="API Documentation" href="../api.html" />
    <link rel="prev" title="minc2" href="nibabel.minc2.html" />
  <meta name="keywords" content="nipy, neuroimaging, python, neuroscience">

  </head>
  <body role="document">
<div style="background-color: white; text-align: left; padding-left: 150px; padding-bottom:50px; padding-top:20px; background-image: url(../_static/nipy-logo-bg-138x120.png); background-repeat: no-repeat;">
<h1>NiBabel</h1>
<h3 style="margin-top:-5px;color:#2f83c8">Access a cacophony of neuro-imaging file formats</h3>
</div>

    <div class="related" role="navigation" aria-label="related navigation">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../py-modindex.html" title="Python Module Index"
             >modules</a> |</li>
        <li class="right" >
          <a href="nibabel.minc2.html" title="minc2"
             accesskey="P">previous</a> |</li>
  <li><a href="http://nipy.org/">Community</a> |&nbsp;</li>
  <li><a href="../index.html">NiBabel Home</a> |&nbsp;</li>
  <li><a href="https://mail.python.org/mailman/listinfo/neuroimaging">Mailing list</a> |&nbsp;</li>
  <li><a href="legal.html">License</a> |&nbsp;</li>

          <li class="nav-item nav-item-1"><a href="../api.html" accesskey="U">API Documentation</a> &#187;</li> 
      </ul>
    </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../index.html">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#"><code class="docutils literal"><span class="pre">nicom</span></code></a><ul>
<li><a class="reference internal" href="#module-nibabel.nicom.csareader">Module: <code class="docutils literal"><span class="pre">nicom.csareader</span></code></a></li>
<li><a class="reference internal" href="#module-nibabel.nicom.dicomreaders">Module: <code class="docutils literal"><span class="pre">nicom.dicomreaders</span></code></a></li>
<li><a class="reference internal" href="#module-nibabel.nicom.dicomwrappers">Module: <code class="docutils literal"><span class="pre">nicom.dicomwrappers</span></code></a></li>
<li><a class="reference internal" href="#module-nibabel.nicom.dwiparams">Module: <code class="docutils literal"><span class="pre">nicom.dwiparams</span></code></a></li>
<li><a class="reference internal" href="#module-nibabel.nicom.structreader">Module: <code class="docutils literal"><span class="pre">nicom.structreader</span></code></a></li>
<li><a class="reference internal" href="#module-nibabel.nicom.utils">Module: <code class="docutils literal"><span class="pre">nicom.utils</span></code></a><ul>
<li><a class="reference internal" href="#csaerror"><code class="docutils literal"><span class="pre">CSAError</span></code></a></li>
<li><a class="reference internal" href="#csareaderror"><code class="docutils literal"><span class="pre">CSAReadError</span></code></a></li>
<li><a class="reference internal" href="#get-acq-mat-txt">get_acq_mat_txt</a></li>
<li><a class="reference internal" href="#get-b-matrix">get_b_matrix</a></li>
<li><a class="reference internal" href="#get-b-value">get_b_value</a></li>
<li><a class="reference internal" href="#get-csa-header">get_csa_header</a></li>
<li><a class="reference internal" href="#get-g-vector">get_g_vector</a></li>
<li><a class="reference internal" href="#get-ice-dims">get_ice_dims</a></li>
<li><a class="reference internal" href="#get-n-mosaic">get_n_mosaic</a></li>
<li><a class="reference internal" href="#get-scalar">get_scalar</a></li>
<li><a class="reference internal" href="#get-slice-normal">get_slice_normal</a></li>
<li><a class="reference internal" href="#get-vector">get_vector</a></li>
<li><a class="reference internal" href="#is-mosaic">is_mosaic</a></li>
<li><a class="reference internal" href="#nt-str">nt_str</a></li>
<li><a class="reference internal" href="#read">read</a></li>
<li><a class="reference internal" href="#dicomreaderror"><code class="docutils literal"><span class="pre">DicomReadError</span></code></a></li>
<li><a class="reference internal" href="#mosaic-to-nii">mosaic_to_nii</a></li>
<li><a class="reference internal" href="#read-mosaic-dir">read_mosaic_dir</a></li>
<li><a class="reference internal" href="#read-mosaic-dwi-dir">read_mosaic_dwi_dir</a></li>
<li><a class="reference internal" href="#slices-to-series">slices_to_series</a></li>
<li><a class="reference internal" href="#mosaicwrapper"><code class="docutils literal"><span class="pre">MosaicWrapper</span></code></a></li>
<li><a class="reference internal" href="#multiframewrapper"><code class="docutils literal"><span class="pre">MultiframeWrapper</span></code></a></li>
<li><a class="reference internal" href="#siemenswrapper"><code class="docutils literal"><span class="pre">SiemensWrapper</span></code></a></li>
<li><a class="reference internal" href="#wrapper"><code class="docutils literal"><span class="pre">Wrapper</span></code></a></li>
<li><a class="reference internal" href="#wrappererror"><code class="docutils literal"><span class="pre">WrapperError</span></code></a></li>
<li><a class="reference internal" href="#wrapperprecisionerror"><code class="docutils literal"><span class="pre">WrapperPrecisionError</span></code></a></li>
<li><a class="reference internal" href="#none-or-close">none_or_close</a></li>
<li><a class="reference internal" href="#wrapper-from-data">wrapper_from_data</a></li>
<li><a class="reference internal" href="#wrapper-from-file">wrapper_from_file</a></li>
<li><a class="reference internal" href="#b2q">B2q</a></li>
<li><a class="reference internal" href="#nearest-pos-semi-def">nearest_pos_semi_def</a></li>
<li><a class="reference internal" href="#q2bg">q2bg</a></li>
<li><a class="reference internal" href="#unpacker"><code class="docutils literal"><span class="pre">Unpacker</span></code></a></li>
<li><a class="reference internal" href="#find-private-section">find_private_section</a></li>
</ul>
</li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="nibabel.minc2.html"
                        title="previous chapter"><code class="docutils literal"><span class="pre">minc2</span></code></a></p>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../_sources/reference/nibabel.nicom.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>

<div id="searchbox" style="display: none" role="search">
  <h3>Quick search</h3>
    <form class="search" action="../search.html" method="get">
      <div><input type="text" name="q" /></div>
      <div><input type="submit" value="Go" /></div>
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
<p><img src="../_static/reggie.png" alt="Reggie -- the one" /></p>

        </div>
      </div>

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <div class="section" id="module-nibabel.nicom">
<span id="nicom"></span><h1><code class="xref py py-mod docutils literal"><span class="pre">nicom</span></code><a class="headerlink" href="#module-nibabel.nicom" title="Permalink to this headline">¶</a></h1>
<p>DICOM reader</p>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference internal" href="#module-nibabel.nicom.csareader" title="nibabel.nicom.csareader"><code class="xref py py-obj docutils literal"><span class="pre">csareader</span></code></a></td>
<td>CSA header reader from SPM spec</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#module-nibabel.nicom.dicomreaders" title="nibabel.nicom.dicomreaders"><code class="xref py py-obj docutils literal"><span class="pre">dicomreaders</span></code></a></td>
<td></td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#module-nibabel.nicom.dicomwrappers" title="nibabel.nicom.dicomwrappers"><code class="xref py py-obj docutils literal"><span class="pre">dicomwrappers</span></code></a></td>
<td>Classes to wrap DICOM objects and files</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#module-nibabel.nicom.dwiparams" title="nibabel.nicom.dwiparams"><code class="xref py py-obj docutils literal"><span class="pre">dwiparams</span></code></a></td>
<td>Process diffusion imaging parameters</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#module-nibabel.nicom.structreader" title="nibabel.nicom.structreader"><code class="xref py py-obj docutils literal"><span class="pre">structreader</span></code></a></td>
<td>Stream-like reader for packed data</td>
</tr>
</tbody>
</table>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
</tbody>
</table>
<div class="section" id="module-nibabel.nicom.csareader">
<span id="module-nicom-csareader"></span><h2>Module: <code class="xref py py-mod docutils literal"><span class="pre">nicom.csareader</span></code><a class="headerlink" href="#module-nibabel.nicom.csareader" title="Permalink to this headline">¶</a></h2>
<p>CSA header reader from SPM spec</p>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference internal" href="#nibabel.nicom.csareader.CSAError" title="nibabel.nicom.csareader.CSAError"><code class="xref py py-obj docutils literal"><span class="pre">CSAError</span></code></a></td>
<td></td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#nibabel.nicom.csareader.CSAReadError" title="nibabel.nicom.csareader.CSAReadError"><code class="xref py py-obj docutils literal"><span class="pre">CSAReadError</span></code></a></td>
<td></td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#nibabel.nicom.csareader.get_acq_mat_txt" title="nibabel.nicom.csareader.get_acq_mat_txt"><code class="xref py py-obj docutils literal"><span class="pre">get_acq_mat_txt</span></code></a>(csa_dict)</td>
<td></td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#nibabel.nicom.csareader.get_b_matrix" title="nibabel.nicom.csareader.get_b_matrix"><code class="xref py py-obj docutils literal"><span class="pre">get_b_matrix</span></code></a>(csa_dict)</td>
<td></td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#nibabel.nicom.csareader.get_b_value" title="nibabel.nicom.csareader.get_b_value"><code class="xref py py-obj docutils literal"><span class="pre">get_b_value</span></code></a>(csa_dict)</td>
<td></td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#nibabel.nicom.csareader.get_csa_header" title="nibabel.nicom.csareader.get_csa_header"><code class="xref py py-obj docutils literal"><span class="pre">get_csa_header</span></code></a>(dcm_data[,&nbsp;csa_type])</td>
<td>Get CSA header information from DICOM header</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#nibabel.nicom.csareader.get_g_vector" title="nibabel.nicom.csareader.get_g_vector"><code class="xref py py-obj docutils literal"><span class="pre">get_g_vector</span></code></a>(csa_dict)</td>
<td></td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#nibabel.nicom.csareader.get_ice_dims" title="nibabel.nicom.csareader.get_ice_dims"><code class="xref py py-obj docutils literal"><span class="pre">get_ice_dims</span></code></a>(csa_dict)</td>
<td></td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#nibabel.nicom.csareader.get_n_mosaic" title="nibabel.nicom.csareader.get_n_mosaic"><code class="xref py py-obj docutils literal"><span class="pre">get_n_mosaic</span></code></a>(csa_dict)</td>
<td></td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#nibabel.nicom.csareader.get_scalar" title="nibabel.nicom.csareader.get_scalar"><code class="xref py py-obj docutils literal"><span class="pre">get_scalar</span></code></a>(csa_dict,&nbsp;tag_name)</td>
<td></td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#nibabel.nicom.csareader.get_slice_normal" title="nibabel.nicom.csareader.get_slice_normal"><code class="xref py py-obj docutils literal"><span class="pre">get_slice_normal</span></code></a>(csa_dict)</td>
<td></td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#nibabel.nicom.csareader.get_vector" title="nibabel.nicom.csareader.get_vector"><code class="xref py py-obj docutils literal"><span class="pre">get_vector</span></code></a>(csa_dict,&nbsp;tag_name,&nbsp;n)</td>
<td></td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#nibabel.nicom.csareader.is_mosaic" title="nibabel.nicom.csareader.is_mosaic"><code class="xref py py-obj docutils literal"><span class="pre">is_mosaic</span></code></a>(csa_dict)</td>
<td>Return True if the data is of Mosaic type</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#nibabel.nicom.csareader.nt_str" title="nibabel.nicom.csareader.nt_str"><code class="xref py py-obj docutils literal"><span class="pre">nt_str</span></code></a>(s)</td>
<td>Strip string to first null</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#nibabel.nicom.csareader.read" title="nibabel.nicom.csareader.read"><code class="xref py py-obj docutils literal"><span class="pre">read</span></code></a>(csa_str)</td>
<td>Read CSA header from string <cite>csa_str</cite></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="module-nibabel.nicom.dicomreaders">
<span id="module-nicom-dicomreaders"></span><h2>Module: <code class="xref py py-mod docutils literal"><span class="pre">nicom.dicomreaders</span></code><a class="headerlink" href="#module-nibabel.nicom.dicomreaders" title="Permalink to this headline">¶</a></h2>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference internal" href="#nibabel.nicom.dicomreaders.DicomReadError" title="nibabel.nicom.dicomreaders.DicomReadError"><code class="xref py py-obj docutils literal"><span class="pre">DicomReadError</span></code></a></td>
<td></td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#nibabel.nicom.dicomreaders.mosaic_to_nii" title="nibabel.nicom.dicomreaders.mosaic_to_nii"><code class="xref py py-obj docutils literal"><span class="pre">mosaic_to_nii</span></code></a>(dcm_data)</td>
<td>Get Nifti file from Siemens</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#nibabel.nicom.dicomreaders.read_mosaic_dir" title="nibabel.nicom.dicomreaders.read_mosaic_dir"><code class="xref py py-obj docutils literal"><span class="pre">read_mosaic_dir</span></code></a>(dicom_path[,&nbsp;globber,&nbsp;...])</td>
<td>Read all Siemens mosaic DICOMs in directory, return arrays, params</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#nibabel.nicom.dicomreaders.read_mosaic_dwi_dir" title="nibabel.nicom.dicomreaders.read_mosaic_dwi_dir"><code class="xref py py-obj docutils literal"><span class="pre">read_mosaic_dwi_dir</span></code></a>(dicom_path[,&nbsp;globber,&nbsp;...])</td>
<td></td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#nibabel.nicom.dicomreaders.slices_to_series" title="nibabel.nicom.dicomreaders.slices_to_series"><code class="xref py py-obj docutils literal"><span class="pre">slices_to_series</span></code></a>(wrappers)</td>
<td>Sort sequence of slice wrappers into series</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="module-nibabel.nicom.dicomwrappers">
<span id="module-nicom-dicomwrappers"></span><h2>Module: <code class="xref py py-mod docutils literal"><span class="pre">nicom.dicomwrappers</span></code><a class="headerlink" href="#module-nibabel.nicom.dicomwrappers" title="Permalink to this headline">¶</a></h2>
<p>Classes to wrap DICOM objects and files</p>
<p>The wrappers encapsulate the capabilities of the different DICOM
formats.</p>
<p>They also allow dictionary-like access to named fields.</p>
<p>For calculated attributes, we return None where needed data is missing.
It seemed strange to raise an error during attribute processing, other
than an AttributeError - breaking the &#8216;properties manifesto&#8217;.   So, any
processing that needs to raise an error, should be in a method, rather
than in a property, or property-like thing.</p>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference internal" href="#nibabel.nicom.dicomwrappers.MosaicWrapper" title="nibabel.nicom.dicomwrappers.MosaicWrapper"><code class="xref py py-obj docutils literal"><span class="pre">MosaicWrapper</span></code></a>(dcm_data[,&nbsp;csa_header,&nbsp;n_mosaic])</td>
<td>Class for Siemens mosaic format data</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#nibabel.nicom.dicomwrappers.MultiframeWrapper" title="nibabel.nicom.dicomwrappers.MultiframeWrapper"><code class="xref py py-obj docutils literal"><span class="pre">MultiframeWrapper</span></code></a>(dcm_data)</td>
<td>Wrapper for Enhanced MR Storage SOP Class</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#nibabel.nicom.dicomwrappers.SiemensWrapper" title="nibabel.nicom.dicomwrappers.SiemensWrapper"><code class="xref py py-obj docutils literal"><span class="pre">SiemensWrapper</span></code></a>(dcm_data[,&nbsp;csa_header])</td>
<td>Wrapper for Siemens format DICOMs</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#nibabel.nicom.dicomwrappers.Wrapper" title="nibabel.nicom.dicomwrappers.Wrapper"><code class="xref py py-obj docutils literal"><span class="pre">Wrapper</span></code></a>(dcm_data)</td>
<td>Class to wrap general DICOM files</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#nibabel.nicom.dicomwrappers.WrapperError" title="nibabel.nicom.dicomwrappers.WrapperError"><code class="xref py py-obj docutils literal"><span class="pre">WrapperError</span></code></a></td>
<td></td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#nibabel.nicom.dicomwrappers.WrapperPrecisionError" title="nibabel.nicom.dicomwrappers.WrapperPrecisionError"><code class="xref py py-obj docutils literal"><span class="pre">WrapperPrecisionError</span></code></a></td>
<td></td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#nibabel.nicom.dicomwrappers.none_or_close" title="nibabel.nicom.dicomwrappers.none_or_close"><code class="xref py py-obj docutils literal"><span class="pre">none_or_close</span></code></a>(val1,&nbsp;val2[,&nbsp;rtol,&nbsp;atol])</td>
<td>Match if <cite>val1</cite> and <cite>val2</cite> are both None, or are close</td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#nibabel.nicom.dicomwrappers.wrapper_from_data" title="nibabel.nicom.dicomwrappers.wrapper_from_data"><code class="xref py py-obj docutils literal"><span class="pre">wrapper_from_data</span></code></a>(dcm_data)</td>
<td>Create DICOM wrapper from DICOM data object</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#nibabel.nicom.dicomwrappers.wrapper_from_file" title="nibabel.nicom.dicomwrappers.wrapper_from_file"><code class="xref py py-obj docutils literal"><span class="pre">wrapper_from_file</span></code></a>(file_like,&nbsp;*args,&nbsp;**kwargs)</td>
<td>Create DICOM wrapper from <cite>file_like</cite> object</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="module-nibabel.nicom.dwiparams">
<span id="module-nicom-dwiparams"></span><h2>Module: <code class="xref py py-mod docutils literal"><span class="pre">nicom.dwiparams</span></code><a class="headerlink" href="#module-nibabel.nicom.dwiparams" title="Permalink to this headline">¶</a></h2>
<p>Process diffusion imaging parameters</p>
<ul class="simple">
<li><code class="docutils literal"><span class="pre">q</span></code> is a vector in Q space</li>
<li><code class="docutils literal"><span class="pre">b</span></code> is a b value</li>
<li><code class="docutils literal"><span class="pre">g</span></code> is the unit vector along the direction of q (the gradient
direction)</li>
</ul>
<p>Thus:</p>
<blockquote>
<div><p>b = norm(q)</p>
<p>g = q  / norm(q)</p>
</div></blockquote>
<p>(<code class="docutils literal"><span class="pre">norm(q)</span></code> is the Euclidean norm of <code class="docutils literal"><span class="pre">q</span></code>)</p>
<p>The B matrix <code class="docutils literal"><span class="pre">B</span></code> is a symmetric positive semi-definite matrix.  If
<code class="docutils literal"><span class="pre">q_est</span></code> is the closest q vector equivalent to the B matrix, then:</p>
<blockquote>
<div>B ~ (q_est . q_est.T) / norm(q_est)</div></blockquote>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference internal" href="#nibabel.nicom.dwiparams.B2q" title="nibabel.nicom.dwiparams.B2q"><code class="xref py py-obj docutils literal"><span class="pre">B2q</span></code></a>(B[,&nbsp;tol])</td>
<td>Estimate q vector from input B matrix <cite>B</cite></td>
</tr>
<tr class="row-even"><td><a class="reference internal" href="#nibabel.nicom.dwiparams.nearest_pos_semi_def" title="nibabel.nicom.dwiparams.nearest_pos_semi_def"><code class="xref py py-obj docutils literal"><span class="pre">nearest_pos_semi_def</span></code></a>(B)</td>
<td>Least squares positive semi-definite tensor estimation</td>
</tr>
<tr class="row-odd"><td><a class="reference internal" href="#nibabel.nicom.dwiparams.q2bg" title="nibabel.nicom.dwiparams.q2bg"><code class="xref py py-obj docutils literal"><span class="pre">q2bg</span></code></a>(q_vector[,&nbsp;tol])</td>
<td>Return b value and q unit vector from q vector <cite>q_vector</cite></td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="module-nibabel.nicom.structreader">
<span id="module-nicom-structreader"></span><h2>Module: <code class="xref py py-mod docutils literal"><span class="pre">nicom.structreader</span></code><a class="headerlink" href="#module-nibabel.nicom.structreader" title="Permalink to this headline">¶</a></h2>
<p>Stream-like reader for packed data</p>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference internal" href="#nibabel.nicom.structreader.Unpacker" title="nibabel.nicom.structreader.Unpacker"><code class="xref py py-obj docutils literal"><span class="pre">Unpacker</span></code></a>(buf[,&nbsp;ptr,&nbsp;endian])</td>
<td>Class to unpack values from buffer object</td>
</tr>
</tbody>
</table>
</div>
<div class="section" id="module-nibabel.nicom.utils">
<span id="module-nicom-utils"></span><h2>Module: <code class="xref py py-mod docutils literal"><span class="pre">nicom.utils</span></code><a class="headerlink" href="#module-nibabel.nicom.utils" title="Permalink to this headline">¶</a></h2>
<p>Utilities for working with DICOM datasets</p>
<table border="1" class="longtable docutils">
<colgroup>
<col width="10%" />
<col width="90%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td><a class="reference internal" href="#nibabel.nicom.utils.find_private_section" title="nibabel.nicom.utils.find_private_section"><code class="xref py py-obj docutils literal"><span class="pre">find_private_section</span></code></a>(dcm_data,&nbsp;group_no,&nbsp;creator)</td>
<td>Return start element in group <cite>group_no</cite> given creator name <cite>creator</cite></td>
</tr>
</tbody>
</table>
<div class="section" id="csaerror">
<h3><a class="reference internal" href="#nibabel.nicom.csareader.CSAError" title="nibabel.nicom.csareader.CSAError"><code class="xref py py-class docutils literal"><span class="pre">CSAError</span></code></a><a class="headerlink" href="#csaerror" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="nibabel.nicom.csareader.CSAError">
<em class="property">class </em><code class="descclassname">nibabel.nicom.csareader.</code><code class="descname">CSAError</code><a class="headerlink" href="#nibabel.nicom.csareader.CSAError" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">exceptions.Exception</span></code></p>
<dl class="method">
<dt id="nibabel.nicom.csareader.CSAError.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#nibabel.nicom.csareader.CSAError.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>x.__init__(...) initializes x; see help(type(x)) for signature</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="csareaderror">
<h3><a class="reference internal" href="#nibabel.nicom.csareader.CSAReadError" title="nibabel.nicom.csareader.CSAReadError"><code class="xref py py-class docutils literal"><span class="pre">CSAReadError</span></code></a><a class="headerlink" href="#csareaderror" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="nibabel.nicom.csareader.CSAReadError">
<em class="property">class </em><code class="descclassname">nibabel.nicom.csareader.</code><code class="descname">CSAReadError</code><a class="headerlink" href="#nibabel.nicom.csareader.CSAReadError" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#nibabel.nicom.csareader.CSAError" title="nibabel.nicom.csareader.CSAError"><code class="xref py py-class docutils literal"><span class="pre">nibabel.nicom.csareader.CSAError</span></code></a></p>
<dl class="method">
<dt id="nibabel.nicom.csareader.CSAReadError.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#nibabel.nicom.csareader.CSAReadError.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>x.__init__(...) initializes x; see help(type(x)) for signature</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="get-acq-mat-txt">
<h3>get_acq_mat_txt<a class="headerlink" href="#get-acq-mat-txt" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="nibabel.nicom.csareader.get_acq_mat_txt">
<code class="descclassname">nibabel.nicom.csareader.</code><code class="descname">get_acq_mat_txt</code><span class="sig-paren">(</span><em>csa_dict</em><span class="sig-paren">)</span><a class="headerlink" href="#nibabel.nicom.csareader.get_acq_mat_txt" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
<div class="section" id="get-b-matrix">
<h3>get_b_matrix<a class="headerlink" href="#get-b-matrix" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="nibabel.nicom.csareader.get_b_matrix">
<code class="descclassname">nibabel.nicom.csareader.</code><code class="descname">get_b_matrix</code><span class="sig-paren">(</span><em>csa_dict</em><span class="sig-paren">)</span><a class="headerlink" href="#nibabel.nicom.csareader.get_b_matrix" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
<div class="section" id="get-b-value">
<h3>get_b_value<a class="headerlink" href="#get-b-value" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="nibabel.nicom.csareader.get_b_value">
<code class="descclassname">nibabel.nicom.csareader.</code><code class="descname">get_b_value</code><span class="sig-paren">(</span><em>csa_dict</em><span class="sig-paren">)</span><a class="headerlink" href="#nibabel.nicom.csareader.get_b_value" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
<div class="section" id="get-csa-header">
<h3>get_csa_header<a class="headerlink" href="#get-csa-header" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="nibabel.nicom.csareader.get_csa_header">
<code class="descclassname">nibabel.nicom.csareader.</code><code class="descname">get_csa_header</code><span class="sig-paren">(</span><em>dcm_data</em>, <em>csa_type='image'</em><span class="sig-paren">)</span><a class="headerlink" href="#nibabel.nicom.csareader.get_csa_header" title="Permalink to this definition">¶</a></dt>
<dd><p>Get CSA header information from DICOM header</p>
<p>Return None if the header does not contain CSA information of the
specified <cite>csa_type</cite></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>dcm_data</strong> : dicom.Dataset</p>
<blockquote>
<div><p>DICOM dataset.  Should implement <code class="docutils literal"><span class="pre">__getitem__</span></code> and, if initial check
for presence of <code class="docutils literal"><span class="pre">dcm_data[(0x29,</span> <span class="pre">0x10)]</span></code> passes, should satisfy
interface for <code class="docutils literal"><span class="pre">find_private_section</span></code>.</p>
</div></blockquote>
<p><strong>csa_type</strong> : {&#8216;image&#8217;, &#8216;series&#8217;}, optional</p>
<blockquote>
<div><p>Type of CSA field to read; default is &#8216;image&#8217;</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>csa_info</strong> : None or dict</p>
<blockquote class="last">
<div><p>Parsed CSA field of <cite>csa_type</cite> or None, if we cannot find the CSA
information.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="get-g-vector">
<h3>get_g_vector<a class="headerlink" href="#get-g-vector" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="nibabel.nicom.csareader.get_g_vector">
<code class="descclassname">nibabel.nicom.csareader.</code><code class="descname">get_g_vector</code><span class="sig-paren">(</span><em>csa_dict</em><span class="sig-paren">)</span><a class="headerlink" href="#nibabel.nicom.csareader.get_g_vector" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
<div class="section" id="get-ice-dims">
<h3>get_ice_dims<a class="headerlink" href="#get-ice-dims" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="nibabel.nicom.csareader.get_ice_dims">
<code class="descclassname">nibabel.nicom.csareader.</code><code class="descname">get_ice_dims</code><span class="sig-paren">(</span><em>csa_dict</em><span class="sig-paren">)</span><a class="headerlink" href="#nibabel.nicom.csareader.get_ice_dims" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
<div class="section" id="get-n-mosaic">
<h3>get_n_mosaic<a class="headerlink" href="#get-n-mosaic" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="nibabel.nicom.csareader.get_n_mosaic">
<code class="descclassname">nibabel.nicom.csareader.</code><code class="descname">get_n_mosaic</code><span class="sig-paren">(</span><em>csa_dict</em><span class="sig-paren">)</span><a class="headerlink" href="#nibabel.nicom.csareader.get_n_mosaic" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
<div class="section" id="get-scalar">
<h3>get_scalar<a class="headerlink" href="#get-scalar" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="nibabel.nicom.csareader.get_scalar">
<code class="descclassname">nibabel.nicom.csareader.</code><code class="descname">get_scalar</code><span class="sig-paren">(</span><em>csa_dict</em>, <em>tag_name</em><span class="sig-paren">)</span><a class="headerlink" href="#nibabel.nicom.csareader.get_scalar" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
<div class="section" id="get-slice-normal">
<h3>get_slice_normal<a class="headerlink" href="#get-slice-normal" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="nibabel.nicom.csareader.get_slice_normal">
<code class="descclassname">nibabel.nicom.csareader.</code><code class="descname">get_slice_normal</code><span class="sig-paren">(</span><em>csa_dict</em><span class="sig-paren">)</span><a class="headerlink" href="#nibabel.nicom.csareader.get_slice_normal" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
<div class="section" id="get-vector">
<h3>get_vector<a class="headerlink" href="#get-vector" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="nibabel.nicom.csareader.get_vector">
<code class="descclassname">nibabel.nicom.csareader.</code><code class="descname">get_vector</code><span class="sig-paren">(</span><em>csa_dict</em>, <em>tag_name</em>, <em>n</em><span class="sig-paren">)</span><a class="headerlink" href="#nibabel.nicom.csareader.get_vector" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
<div class="section" id="is-mosaic">
<h3>is_mosaic<a class="headerlink" href="#is-mosaic" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="nibabel.nicom.csareader.is_mosaic">
<code class="descclassname">nibabel.nicom.csareader.</code><code class="descname">is_mosaic</code><span class="sig-paren">(</span><em>csa_dict</em><span class="sig-paren">)</span><a class="headerlink" href="#nibabel.nicom.csareader.is_mosaic" title="Permalink to this definition">¶</a></dt>
<dd><p>Return True if the data is of Mosaic type</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>csa_dict</strong> : dict</p>
<blockquote>
<div><p>dict containing read CSA data</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>tf</strong> : bool</p>
<blockquote class="last">
<div><p>True if the <cite>dcm_data</cite> appears to be of Siemens mosaic type,
False otherwise</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="nt-str">
<h3>nt_str<a class="headerlink" href="#nt-str" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="nibabel.nicom.csareader.nt_str">
<code class="descclassname">nibabel.nicom.csareader.</code><code class="descname">nt_str</code><span class="sig-paren">(</span><em>s</em><span class="sig-paren">)</span><a class="headerlink" href="#nibabel.nicom.csareader.nt_str" title="Permalink to this definition">¶</a></dt>
<dd><p>Strip string to first null</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>s</strong> : bytes</p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>sdash</strong> : str</p>
<blockquote class="last">
<div><p>s stripped to first occurence of null (0)</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="read">
<h3>read<a class="headerlink" href="#read" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="nibabel.nicom.csareader.read">
<code class="descclassname">nibabel.nicom.csareader.</code><code class="descname">read</code><span class="sig-paren">(</span><em>csa_str</em><span class="sig-paren">)</span><a class="headerlink" href="#nibabel.nicom.csareader.read" title="Permalink to this definition">¶</a></dt>
<dd><p>Read CSA header from string <cite>csa_str</cite></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>csa_str</strong> : str</p>
<blockquote>
<div><p>byte string containing CSA header information</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>header</strong> : dict</p>
<blockquote class="last">
<div><p>header information as dict, where <cite>header</cite> has fields (at least)
<code class="docutils literal"><span class="pre">type,</span> <span class="pre">n_tags,</span> <span class="pre">tags</span></code>.  <code class="docutils literal"><span class="pre">header['tags']</span></code> is also a dictionary
with one key, value pair for each tag in the header.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="dicomreaderror">
<h3><a class="reference internal" href="#nibabel.nicom.dicomreaders.DicomReadError" title="nibabel.nicom.dicomreaders.DicomReadError"><code class="xref py py-class docutils literal"><span class="pre">DicomReadError</span></code></a><a class="headerlink" href="#dicomreaderror" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="nibabel.nicom.dicomreaders.DicomReadError">
<em class="property">class </em><code class="descclassname">nibabel.nicom.dicomreaders.</code><code class="descname">DicomReadError</code><a class="headerlink" href="#nibabel.nicom.dicomreaders.DicomReadError" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">exceptions.Exception</span></code></p>
<dl class="method">
<dt id="nibabel.nicom.dicomreaders.DicomReadError.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#nibabel.nicom.dicomreaders.DicomReadError.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>x.__init__(...) initializes x; see help(type(x)) for signature</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="mosaic-to-nii">
<h3>mosaic_to_nii<a class="headerlink" href="#mosaic-to-nii" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="nibabel.nicom.dicomreaders.mosaic_to_nii">
<code class="descclassname">nibabel.nicom.dicomreaders.</code><code class="descname">mosaic_to_nii</code><span class="sig-paren">(</span><em>dcm_data</em><span class="sig-paren">)</span><a class="headerlink" href="#nibabel.nicom.dicomreaders.mosaic_to_nii" title="Permalink to this definition">¶</a></dt>
<dd><p>Get Nifti file from Siemens</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>dcm_data</strong> : <code class="docutils literal"><span class="pre">dicom.DataSet</span></code></p>
<blockquote>
<div><p>DICOM header / image as read by <code class="docutils literal"><span class="pre">dicom</span></code> package</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>img</strong> : <code class="docutils literal"><span class="pre">Nifti1Image</span></code></p>
<blockquote class="last">
<div><p>Nifti image object</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="read-mosaic-dir">
<h3>read_mosaic_dir<a class="headerlink" href="#read-mosaic-dir" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="nibabel.nicom.dicomreaders.read_mosaic_dir">
<code class="descclassname">nibabel.nicom.dicomreaders.</code><code class="descname">read_mosaic_dir</code><span class="sig-paren">(</span><em>dicom_path</em>, <em>globber='*.dcm'</em>, <em>check_is_dwi=False</em>, <em>dicom_kwargs=None</em><span class="sig-paren">)</span><a class="headerlink" href="#nibabel.nicom.dicomreaders.read_mosaic_dir" title="Permalink to this definition">¶</a></dt>
<dd><p>Read all Siemens mosaic DICOMs in directory, return arrays, params</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>dicom_path</strong> : str</p>
<blockquote>
<div><p>path containing mosaic DICOM images</p>
</div></blockquote>
<p><strong>globber</strong> : str, optional</p>
<blockquote>
<div><p>glob to apply within <cite>dicom_path</cite> to select DICOM files.  Default
is <code class="docutils literal"><span class="pre">*.dcm</span></code></p>
</div></blockquote>
<p><strong>check_is_dwi</strong> : bool, optional</p>
<blockquote>
<div><p>If True, raises an error if we don&#8217;t find DWI information in the
DICOM headers.</p>
</div></blockquote>
<p><strong>dicom_kwargs</strong> : None or dict</p>
<blockquote>
<div><p>Extra keyword arguments to pass to the pydicom <code class="docutils literal"><span class="pre">read_file</span></code> function.</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>data</strong> : 4D array</p>
<blockquote>
<div><p>data array with last dimension being acquisition. If there were N
acquisitions, each of shape (X, Y, Z), <cite>data</cite> will be shape (X,
Y, Z, N)</p>
</div></blockquote>
<p><strong>affine</strong> : (4,4) array</p>
<blockquote>
<div><p>affine relating 3D voxel space in data to RAS world space</p>
</div></blockquote>
<p><strong>b_values</strong> : (N,) array</p>
<blockquote>
<div><p>b values for each acquisition.  nan if we did not find diffusion
information for these images.</p>
</div></blockquote>
<p><strong>unit_gradients</strong> : (N, 3) array</p>
<blockquote class="last">
<div><p>gradient directions of unit length for each acquisition.  (nan,
nan, nan) if we did not find diffusion information.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="read-mosaic-dwi-dir">
<h3>read_mosaic_dwi_dir<a class="headerlink" href="#read-mosaic-dwi-dir" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="nibabel.nicom.dicomreaders.read_mosaic_dwi_dir">
<code class="descclassname">nibabel.nicom.dicomreaders.</code><code class="descname">read_mosaic_dwi_dir</code><span class="sig-paren">(</span><em>dicom_path</em>, <em>globber='*.dcm'</em>, <em>dicom_kwargs=None</em><span class="sig-paren">)</span><a class="headerlink" href="#nibabel.nicom.dicomreaders.read_mosaic_dwi_dir" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</div>
<div class="section" id="slices-to-series">
<h3>slices_to_series<a class="headerlink" href="#slices-to-series" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="nibabel.nicom.dicomreaders.slices_to_series">
<code class="descclassname">nibabel.nicom.dicomreaders.</code><code class="descname">slices_to_series</code><span class="sig-paren">(</span><em>wrappers</em><span class="sig-paren">)</span><a class="headerlink" href="#nibabel.nicom.dicomreaders.slices_to_series" title="Permalink to this definition">¶</a></dt>
<dd><p>Sort sequence of slice wrappers into series</p>
<p>This follows the SPM model fairly closely</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>wrappers</strong> : sequence</p>
<blockquote>
<div><p>sequence of <code class="docutils literal"><span class="pre">Wrapper</span></code> objects for sorting into volumes</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>series</strong> : sequence</p>
<blockquote class="last">
<div><p>sequence of sequences of wrapper objects, where each sequence is
wrapper objects comprising a series, sorted into slice order</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="mosaicwrapper">
<h3><a class="reference internal" href="#nibabel.nicom.dicomwrappers.MosaicWrapper" title="nibabel.nicom.dicomwrappers.MosaicWrapper"><code class="xref py py-class docutils literal"><span class="pre">MosaicWrapper</span></code></a><a class="headerlink" href="#mosaicwrapper" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="nibabel.nicom.dicomwrappers.MosaicWrapper">
<em class="property">class </em><code class="descclassname">nibabel.nicom.dicomwrappers.</code><code class="descname">MosaicWrapper</code><span class="sig-paren">(</span><em>dcm_data</em>, <em>csa_header=None</em>, <em>n_mosaic=None</em><span class="sig-paren">)</span><a class="headerlink" href="#nibabel.nicom.dicomwrappers.MosaicWrapper" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#nibabel.nicom.dicomwrappers.SiemensWrapper" title="nibabel.nicom.dicomwrappers.SiemensWrapper"><code class="xref py py-class docutils literal"><span class="pre">nibabel.nicom.dicomwrappers.SiemensWrapper</span></code></a></p>
<p>Class for Siemens mosaic format data</p>
<p>Mosaic format is a way of storing a 3D image in a 2D slice - and
it&#8217;s as simple as you&#8217;d imagine it would be - just storing the slices
in a mosaic similar to a light-box print.</p>
<p>We need to allow for this when getting the data and (because of an
idiosyncrasy in the way Siemens stores the images) calculating the
position of the first voxel.</p>
<p>Adds attributes:</p>
<ul class="simple">
<li>n_mosaic : int</li>
<li>mosaic_size : int</li>
</ul>
<p>Initialize Siemens Mosaic wrapper</p>
<p>The Siemens-specific information is in the <cite>csa_header</cite>, either
passed in here, or read from the input <cite>dcm_data</cite>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>dcm_data</strong> : object</p>
<blockquote>
<div><p>object should allow &#8216;get&#8217; and &#8216;__getitem__&#8217; access.  If <cite>csa_header</cite>
is None, it should also be possible for to extract a CSA header from
<cite>dcm_data</cite>. Usually this will be a <code class="docutils literal"><span class="pre">dicom.dataset.Dataset</span></code> object
resulting from reading a DICOM file.  A dict should also work.</p>
</div></blockquote>
<p><strong>csa_header</strong> : None or mapping, optional</p>
<blockquote>
<div><p>mapping giving values for Siemens CSA image sub-header.</p>
</div></blockquote>
<p><strong>n_mosaic</strong> : None or int, optional</p>
<blockquote class="last">
<div><p>number of images in mosaic.  If None, try to get this number
from <cite>csa_header</cite>.  If this fails, raise an error</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="nibabel.nicom.dicomwrappers.MosaicWrapper.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><em>dcm_data</em>, <em>csa_header=None</em>, <em>n_mosaic=None</em><span class="sig-paren">)</span><a class="headerlink" href="#nibabel.nicom.dicomwrappers.MosaicWrapper.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialize Siemens Mosaic wrapper</p>
<p>The Siemens-specific information is in the <cite>csa_header</cite>, either
passed in here, or read from the input <cite>dcm_data</cite>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>dcm_data</strong> : object</p>
<blockquote>
<div><p>object should allow &#8216;get&#8217; and &#8216;__getitem__&#8217; access.  If <cite>csa_header</cite>
is None, it should also be possible for to extract a CSA header from
<cite>dcm_data</cite>. Usually this will be a <code class="docutils literal"><span class="pre">dicom.dataset.Dataset</span></code> object
resulting from reading a DICOM file.  A dict should also work.</p>
</div></blockquote>
<p><strong>csa_header</strong> : None or mapping, optional</p>
<blockquote>
<div><p>mapping giving values for Siemens CSA image sub-header.</p>
</div></blockquote>
<p><strong>n_mosaic</strong> : None or int, optional</p>
<blockquote class="last">
<div><p>number of images in mosaic.  If None, try to get this number
from <cite>csa_header</cite>.  If this fails, raise an error</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="nibabel.nicom.dicomwrappers.MosaicWrapper.get_data">
<code class="descname">get_data</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#nibabel.nicom.dicomwrappers.MosaicWrapper.get_data" title="Permalink to this definition">¶</a></dt>
<dd><p>Get scaled image data from DICOMs</p>
<p>Resorts data block from mosaic to 3D</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>data</strong> : array</p>
<blockquote class="last">
<div><p>array with data as scaled from any scaling in the DICOM
fields.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Notes</p>
<p>The apparent image in the DICOM file is a 2D array that consists of
blocks, that are the output 2D slices.  Let&#8217;s call the original array
the <em>slab</em>, and the contained slices <em>slices</em>.   The slices are of
pixel dimension <code class="docutils literal"><span class="pre">n_slice_rows</span></code> x <code class="docutils literal"><span class="pre">n_slice_cols</span></code>.  The slab is of
pixel dimension <code class="docutils literal"><span class="pre">n_slab_rows</span></code> x <code class="docutils literal"><span class="pre">n_slab_cols</span></code>.  Because the
arrangement of blocks in the slab is defined as being square, the
number of blocks per slab row and slab column is the same.  Let
<code class="docutils literal"><span class="pre">n_blocks</span></code> be the number of blocks contained in the slab.  There is
also <code class="docutils literal"><span class="pre">n_slices</span></code> - the number of slices actually collected, some
number &lt;= <code class="docutils literal"><span class="pre">n_blocks</span></code>.  We have the value <code class="docutils literal"><span class="pre">n_slices</span></code> from the
&#8216;NumberOfImagesInMosaic&#8217; field of the Siemens private (CSA) header.
<code class="docutils literal"><span class="pre">n_row_blocks</span></code> and <code class="docutils literal"><span class="pre">n_col_blocks</span></code> are therefore given by
<code class="docutils literal"><span class="pre">ceil(sqrt(n_slices))</span></code>, and <code class="docutils literal"><span class="pre">n_blocks</span></code> is <code class="docutils literal"><span class="pre">n_row_blocks</span> <span class="pre">**</span> <span class="pre">2</span></code>.
Also <code class="docutils literal"><span class="pre">n_slice_rows</span> <span class="pre">==</span> <span class="pre">n_slab_rows</span> <span class="pre">/</span> <span class="pre">n_row_blocks</span></code>, etc.  Using these
numbers we can therefore reconstruct the slices from the 2D DICOM pixel
array.</p>
</dd></dl>

<dl class="method">
<dt id="nibabel.nicom.dicomwrappers.MosaicWrapper.image_position">
<code class="descname">image_position</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#nibabel.nicom.dicomwrappers.MosaicWrapper.image_position" title="Permalink to this definition">¶</a></dt>
<dd><p>Return position of first voxel in data block</p>
<p>Adjusts Siemens mosaic position vector for bug in mosaic format
position.  See <code class="docutils literal"><span class="pre">dicom_mosaic</span></code> in doc/theory for details.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>None</strong></p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>img_pos</strong> : (3,) array</p>
<blockquote class="last">
<div><p>position in mm of voxel (0,0,0) in Mosaic array</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="nibabel.nicom.dicomwrappers.MosaicWrapper.image_shape">
<code class="descname">image_shape</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#nibabel.nicom.dicomwrappers.MosaicWrapper.image_shape" title="Permalink to this definition">¶</a></dt>
<dd><p>Return image shape as returned by <code class="docutils literal"><span class="pre">get_data()</span></code></p>
</dd></dl>

<dl class="attribute">
<dt id="nibabel.nicom.dicomwrappers.MosaicWrapper.is_mosaic">
<code class="descname">is_mosaic</code><em class="property"> = True</em><a class="headerlink" href="#nibabel.nicom.dicomwrappers.MosaicWrapper.is_mosaic" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

</div>
<div class="section" id="multiframewrapper">
<h3><a class="reference internal" href="#nibabel.nicom.dicomwrappers.MultiframeWrapper" title="nibabel.nicom.dicomwrappers.MultiframeWrapper"><code class="xref py py-class docutils literal"><span class="pre">MultiframeWrapper</span></code></a><a class="headerlink" href="#multiframewrapper" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="nibabel.nicom.dicomwrappers.MultiframeWrapper">
<em class="property">class </em><code class="descclassname">nibabel.nicom.dicomwrappers.</code><code class="descname">MultiframeWrapper</code><span class="sig-paren">(</span><em>dcm_data</em><span class="sig-paren">)</span><a class="headerlink" href="#nibabel.nicom.dicomwrappers.MultiframeWrapper" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#nibabel.nicom.dicomwrappers.Wrapper" title="nibabel.nicom.dicomwrappers.Wrapper"><code class="xref py py-class docutils literal"><span class="pre">nibabel.nicom.dicomwrappers.Wrapper</span></code></a></p>
<p>Wrapper for Enhanced MR Storage SOP Class</p>
<p>Tested with Philips&#8217; Enhanced DICOM implementation.</p>
<p>The specification for the Enhanced MR image IOP / SOP began life as <a class="reference external" href="ftp://medical.nema.org/medical/dicom/final/sup49_ft.pdf">DICOM
supplement 49</a>,
but as of 2016 it is part of the standard. In particular see:</p>
<ul class="simple">
<li><a class="reference external" href="http://dicom.nema.org/medical/dicom/current/output/pdf/part03.pdf#sect_A.36">A.36 Enhanced MR Information Object Definitions</a>;</li>
<li><a class="reference external" href="http://dicom.nema.org/medical/dicom/current/output/pdf/part03.pdf#sect_C.7.6.16">C.7.6.16 Multi-Frame Functional Groups Module</a>;</li>
<li><a class="reference external" href="http://dicom.nema.org/medical/dicom/current/output/pdf/part03.pdf#sect_C.7.6.17">C.7.6.17 Multi-Frame Dimension Module</a>.</li>
</ul>
<p class="rubric">Attributes</p>
<table border="1" class="docutils">
<colgroup>
<col width="8%" />
<col width="92%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>is_multiframe</td>
<td>(boolean) Identifies <cite>dcmdata</cite> as multi-frame</td>
</tr>
<tr class="row-even"><td>frames</td>
<td>(sequence) A sequence of <code class="docutils literal"><span class="pre">dicom.dataset.Dataset</span></code> objects populated by the <code class="docutils literal"><span class="pre">dicom.dataset.Dataset.PerFrameFunctionalGroupsSequence</span></code> attribute</td>
</tr>
<tr class="row-odd"><td>shared</td>
<td>(object) The first (and only) <code class="docutils literal"><span class="pre">dicom.dataset.Dataset</span></code> object from a <code class="docutils literal"><span class="pre">dicom.dataset.Dataset.SharedFunctionalgroupSequence</span></code>.</td>
</tr>
</tbody>
</table>
<p class="rubric">Methods</p>
<table border="1" class="docutils">
<colgroup>
<col width="72%" />
<col width="28%" />
</colgroup>
<tbody valign="top">
<tr class="row-odd"><td>image_shape(self)</td>
<td>&nbsp;</td>
</tr>
<tr class="row-even"><td>image_orient_patient(self)</td>
<td>&nbsp;</td>
</tr>
<tr class="row-odd"><td>voxel_sizes(self)</td>
<td>&nbsp;</td>
</tr>
<tr class="row-even"><td>image_position(self)</td>
<td>&nbsp;</td>
</tr>
<tr class="row-odd"><td>series_signature(self)</td>
<td>&nbsp;</td>
</tr>
<tr class="row-even"><td>get_data(self)</td>
<td>&nbsp;</td>
</tr>
</tbody>
</table>
<p>Initializes MultiframeWrapper</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>dcm_data</strong> : object</p>
<blockquote class="last">
<div><p>object should allow &#8216;get&#8217; and &#8216;__getitem__&#8217; access.  Usually this
will be a <code class="docutils literal"><span class="pre">dicom.dataset.Dataset</span></code> object resulting from reading a
DICOM file, but a dictionary should also work.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="nibabel.nicom.dicomwrappers.MultiframeWrapper.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><em>dcm_data</em><span class="sig-paren">)</span><a class="headerlink" href="#nibabel.nicom.dicomwrappers.MultiframeWrapper.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Initializes MultiframeWrapper</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>dcm_data</strong> : object</p>
<blockquote class="last">
<div><p>object should allow &#8216;get&#8217; and &#8216;__getitem__&#8217; access.  Usually this
will be a <code class="docutils literal"><span class="pre">dicom.dataset.Dataset</span></code> object resulting from reading a
DICOM file, but a dictionary should also work.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="nibabel.nicom.dicomwrappers.MultiframeWrapper.get_data">
<code class="descname">get_data</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#nibabel.nicom.dicomwrappers.MultiframeWrapper.get_data" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="nibabel.nicom.dicomwrappers.MultiframeWrapper.image_orient_patient">
<code class="descname">image_orient_patient</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#nibabel.nicom.dicomwrappers.MultiframeWrapper.image_orient_patient" title="Permalink to this definition">¶</a></dt>
<dd><p>Note that this is _not_ LR flipped</p>
</dd></dl>

<dl class="method">
<dt id="nibabel.nicom.dicomwrappers.MultiframeWrapper.image_position">
<code class="descname">image_position</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#nibabel.nicom.dicomwrappers.MultiframeWrapper.image_position" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="nibabel.nicom.dicomwrappers.MultiframeWrapper.image_shape">
<code class="descname">image_shape</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#nibabel.nicom.dicomwrappers.MultiframeWrapper.image_shape" title="Permalink to this definition">¶</a></dt>
<dd><p>The array shape as it will be returned by <code class="docutils literal"><span class="pre">get_data()</span></code></p>
<p>The shape is determined by the <em>Rows</em> DICOM attribute, <em>Columns</em>
DICOM attribute, and the set of frame indices given by the
<em>FrameContentSequence[0].DimensionIndexValues</em> DICOM attribute of each
element in the <em>PerFrameFunctionalGroupsSequence</em>.  The first two
axes of the returned shape correspond to the rows, and columns
respectively. The remaining axes correspond to those of the frame
indices with order preserved.</p>
<p>What each axis in the frame indices refers to is given by the
corresponding entry in the <em>DimensionIndexSequence</em> DICOM attribute.
<strong>WARNING</strong>: Any axis refering to the <em>StackID</em> DICOM attribute will
have been removed from the frame indices in determining the shape. This
is because only a file containing a single stack is currently allowed by
this wrapper.</p>
<p class="rubric">References</p>
<ul class="simple">
<li>C.7.6.16 Multi-Frame Functional Groups Module:
<a class="reference external" href="http://dicom.nema.org/medical/dicom/current/output/pdf/part03.pdf#sect_C.7.6.16">http://dicom.nema.org/medical/dicom/current/output/pdf/part03.pdf#sect_C.7.6.16</a></li>
<li>C.7.6.17 Multi-Frame Dimension Module:
<a class="reference external" href="http://dicom.nema.org/medical/dicom/current/output/pdf/part03.pdf#sect_C.7.6.17">http://dicom.nema.org/medical/dicom/current/output/pdf/part03.pdf#sect_C.7.6.17</a></li>
<li>Diagram of DimensionIndexSequence and DimensionIndexValues:
<a class="reference external" href="http://dicom.nema.org/medical/dicom/current/output/pdf/part03.pdf#figure_C.7.6.17-1">http://dicom.nema.org/medical/dicom/current/output/pdf/part03.pdf#figure_C.7.6.17-1</a></li>
</ul>
</dd></dl>

<dl class="attribute">
<dt id="nibabel.nicom.dicomwrappers.MultiframeWrapper.is_multiframe">
<code class="descname">is_multiframe</code><em class="property"> = True</em><a class="headerlink" href="#nibabel.nicom.dicomwrappers.MultiframeWrapper.is_multiframe" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="nibabel.nicom.dicomwrappers.MultiframeWrapper.series_signature">
<code class="descname">series_signature</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#nibabel.nicom.dicomwrappers.MultiframeWrapper.series_signature" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="nibabel.nicom.dicomwrappers.MultiframeWrapper.voxel_sizes">
<code class="descname">voxel_sizes</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#nibabel.nicom.dicomwrappers.MultiframeWrapper.voxel_sizes" title="Permalink to this definition">¶</a></dt>
<dd><p>Get i, j, k voxel sizes</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="siemenswrapper">
<h3><a class="reference internal" href="#nibabel.nicom.dicomwrappers.SiemensWrapper" title="nibabel.nicom.dicomwrappers.SiemensWrapper"><code class="xref py py-class docutils literal"><span class="pre">SiemensWrapper</span></code></a><a class="headerlink" href="#siemenswrapper" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="nibabel.nicom.dicomwrappers.SiemensWrapper">
<em class="property">class </em><code class="descclassname">nibabel.nicom.dicomwrappers.</code><code class="descname">SiemensWrapper</code><span class="sig-paren">(</span><em>dcm_data</em>, <em>csa_header=None</em><span class="sig-paren">)</span><a class="headerlink" href="#nibabel.nicom.dicomwrappers.SiemensWrapper" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#nibabel.nicom.dicomwrappers.Wrapper" title="nibabel.nicom.dicomwrappers.Wrapper"><code class="xref py py-class docutils literal"><span class="pre">nibabel.nicom.dicomwrappers.Wrapper</span></code></a></p>
<p>Wrapper for Siemens format DICOMs</p>
<p>Adds attributes:</p>
<ul class="simple">
<li>csa_header : mapping</li>
<li>b_matrix : (3,3) array</li>
<li>q_vector : (3,) array</li>
</ul>
<p>Initialize Siemens wrapper</p>
<p>The Siemens-specific information is in the <cite>csa_header</cite>, either
passed in here, or read from the input <cite>dcm_data</cite>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>dcm_data</strong> : object</p>
<blockquote>
<div><p>object should allow &#8216;get&#8217; and &#8216;__getitem__&#8217; access.  If <cite>csa_header</cite>
is None, it should also be possible to extract a CSA header from
<cite>dcm_data</cite>. Usually this will be a <code class="docutils literal"><span class="pre">dicom.dataset.Dataset</span></code> object
resulting from reading a DICOM file.  A dict should also work.</p>
</div></blockquote>
<p><strong>csa_header</strong> : None or mapping, optional</p>
<blockquote class="last">
<div><p>mapping giving values for Siemens CSA image sub-header.  If
None, we try and read the CSA information from <cite>dcm_data</cite>.
If this fails, we fall back to an empty dict.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="nibabel.nicom.dicomwrappers.SiemensWrapper.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><em>dcm_data</em>, <em>csa_header=None</em><span class="sig-paren">)</span><a class="headerlink" href="#nibabel.nicom.dicomwrappers.SiemensWrapper.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialize Siemens wrapper</p>
<p>The Siemens-specific information is in the <cite>csa_header</cite>, either
passed in here, or read from the input <cite>dcm_data</cite>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>dcm_data</strong> : object</p>
<blockquote>
<div><p>object should allow &#8216;get&#8217; and &#8216;__getitem__&#8217; access.  If <cite>csa_header</cite>
is None, it should also be possible to extract a CSA header from
<cite>dcm_data</cite>. Usually this will be a <code class="docutils literal"><span class="pre">dicom.dataset.Dataset</span></code> object
resulting from reading a DICOM file.  A dict should also work.</p>
</div></blockquote>
<p><strong>csa_header</strong> : None or mapping, optional</p>
<blockquote class="last">
<div><p>mapping giving values for Siemens CSA image sub-header.  If
None, we try and read the CSA information from <cite>dcm_data</cite>.
If this fails, we fall back to an empty dict.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="nibabel.nicom.dicomwrappers.SiemensWrapper.b_matrix">
<code class="descname">b_matrix</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#nibabel.nicom.dicomwrappers.SiemensWrapper.b_matrix" title="Permalink to this definition">¶</a></dt>
<dd><p>Get DWI B matrix referring to voxel space</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>None</strong></p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>B</strong> : (3,3) array or None</p>
<blockquote class="last">
<div><p>B matrix in <em>voxel</em> orientation space.  Returns None if this is
not a Siemens header with the required information.  We return
None if this is a b0 acquisition</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="nibabel.nicom.dicomwrappers.SiemensWrapper.is_csa">
<code class="descname">is_csa</code><em class="property"> = True</em><a class="headerlink" href="#nibabel.nicom.dicomwrappers.SiemensWrapper.is_csa" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="nibabel.nicom.dicomwrappers.SiemensWrapper.q_vector">
<code class="descname">q_vector</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#nibabel.nicom.dicomwrappers.SiemensWrapper.q_vector" title="Permalink to this definition">¶</a></dt>
<dd><p>Get DWI q vector referring to voxel space</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>None</strong></p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">q: (3,) array</p>
<blockquote class="last">
<div><p>Estimated DWI q vector in <em>voxel</em> orientation space.  Returns
None if this is not (detectably) a DWI</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="nibabel.nicom.dicomwrappers.SiemensWrapper.series_signature">
<code class="descname">series_signature</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#nibabel.nicom.dicomwrappers.SiemensWrapper.series_signature" title="Permalink to this definition">¶</a></dt>
<dd><p>Add ICE dims from CSA header to signature</p>
</dd></dl>

<dl class="method">
<dt id="nibabel.nicom.dicomwrappers.SiemensWrapper.slice_normal">
<code class="descname">slice_normal</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#nibabel.nicom.dicomwrappers.SiemensWrapper.slice_normal" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

</dd></dl>

</div>
<div class="section" id="wrapper">
<h3><a class="reference internal" href="#nibabel.nicom.dicomwrappers.Wrapper" title="nibabel.nicom.dicomwrappers.Wrapper"><code class="xref py py-class docutils literal"><span class="pre">Wrapper</span></code></a><a class="headerlink" href="#wrapper" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="nibabel.nicom.dicomwrappers.Wrapper">
<em class="property">class </em><code class="descclassname">nibabel.nicom.dicomwrappers.</code><code class="descname">Wrapper</code><span class="sig-paren">(</span><em>dcm_data</em><span class="sig-paren">)</span><a class="headerlink" href="#nibabel.nicom.dicomwrappers.Wrapper" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">object</span></code></p>
<p>Class to wrap general DICOM files</p>
<p>Methods:</p>
<ul class="simple">
<li>get_affine()</li>
<li>get_data()</li>
<li>get_pixel_array()</li>
<li>is_same_series(other)</li>
<li>__getitem__ : return attributes from <cite>dcm_data</cite></li>
<li>get(key[, default]) - as usual given __getitem__ above</li>
</ul>
<p>Attributes and things that look like attributes:</p>
<ul class="simple">
<li>dcm_data : object</li>
<li>image_shape : tuple</li>
<li>image_orient_patient : (3,2) array</li>
<li>slice_normal : (3,) array</li>
<li>rotation_matrix : (3,3) array</li>
<li>voxel_sizes : tuple length 3</li>
<li>image_position : sequence length 3</li>
<li>slice_indicator : float</li>
<li>series_signature : tuple</li>
</ul>
<p>Initialize wrapper</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>dcm_data</strong> : object</p>
<blockquote class="last">
<div><p>object should allow &#8216;get&#8217; and &#8216;__getitem__&#8217; access.  Usually this
will be a <code class="docutils literal"><span class="pre">dicom.dataset.Dataset</span></code> object resulting from reading a
DICOM file, but a dictionary should also work.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="nibabel.nicom.dicomwrappers.Wrapper.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><em>dcm_data</em><span class="sig-paren">)</span><a class="headerlink" href="#nibabel.nicom.dicomwrappers.Wrapper.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialize wrapper</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>dcm_data</strong> : object</p>
<blockquote class="last">
<div><p>object should allow &#8216;get&#8217; and &#8216;__getitem__&#8217; access.  Usually this
will be a <code class="docutils literal"><span class="pre">dicom.dataset.Dataset</span></code> object resulting from reading a
DICOM file, but a dictionary should also work.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="nibabel.nicom.dicomwrappers.Wrapper.b_matrix">
<code class="descname">b_matrix</code><em class="property"> = None</em><a class="headerlink" href="#nibabel.nicom.dicomwrappers.Wrapper.b_matrix" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="nibabel.nicom.dicomwrappers.Wrapper.b_value">
<code class="descname">b_value</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#nibabel.nicom.dicomwrappers.Wrapper.b_value" title="Permalink to this definition">¶</a></dt>
<dd><p>Return b value for diffusion or None if not available</p>
</dd></dl>

<dl class="method">
<dt id="nibabel.nicom.dicomwrappers.Wrapper.b_vector">
<code class="descname">b_vector</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#nibabel.nicom.dicomwrappers.Wrapper.b_vector" title="Permalink to this definition">¶</a></dt>
<dd><p>Return b vector for diffusion or None if not available</p>
</dd></dl>

<dl class="method">
<dt id="nibabel.nicom.dicomwrappers.Wrapper.get">
<code class="descname">get</code><span class="sig-paren">(</span><em>key</em>, <em>default=None</em><span class="sig-paren">)</span><a class="headerlink" href="#nibabel.nicom.dicomwrappers.Wrapper.get" title="Permalink to this definition">¶</a></dt>
<dd><p>Get values from underlying dicom data</p>
</dd></dl>

<dl class="method">
<dt id="nibabel.nicom.dicomwrappers.Wrapper.get_affine">
<code class="descname">get_affine</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#nibabel.nicom.dicomwrappers.Wrapper.get_affine" title="Permalink to this definition">¶</a></dt>
<dd><p>Return mapping between voxel and DICOM coordinate system</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>None</strong></p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>aff</strong> : (4,4) affine</p>
<blockquote class="last">
<div><p>Affine giving transformation between voxels in data array and
mm in the DICOM patient coordinate system.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="nibabel.nicom.dicomwrappers.Wrapper.get_data">
<code class="descname">get_data</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#nibabel.nicom.dicomwrappers.Wrapper.get_data" title="Permalink to this definition">¶</a></dt>
<dd><p>Get scaled image data from DICOMs</p>
<p>We return the data as DICOM understands it, first dimension is
rows, second dimension is columns</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>data</strong> : array</p>
<blockquote class="last">
<div><p>array with data as scaled from any scaling in the DICOM
fields.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="nibabel.nicom.dicomwrappers.Wrapper.get_pixel_array">
<code class="descname">get_pixel_array</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#nibabel.nicom.dicomwrappers.Wrapper.get_pixel_array" title="Permalink to this definition">¶</a></dt>
<dd><p>Return unscaled pixel array from DICOM</p>
</dd></dl>

<dl class="method">
<dt id="nibabel.nicom.dicomwrappers.Wrapper.image_orient_patient">
<code class="descname">image_orient_patient</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#nibabel.nicom.dicomwrappers.Wrapper.image_orient_patient" title="Permalink to this definition">¶</a></dt>
<dd><p>Note that this is _not_ LR flipped</p>
</dd></dl>

<dl class="method">
<dt id="nibabel.nicom.dicomwrappers.Wrapper.image_position">
<code class="descname">image_position</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#nibabel.nicom.dicomwrappers.Wrapper.image_position" title="Permalink to this definition">¶</a></dt>
<dd><p>Return position of first voxel in data block</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>None</strong></p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>img_pos</strong> : (3,) array</p>
<blockquote class="last">
<div><p>position in mm of voxel (0,0) in image array</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="nibabel.nicom.dicomwrappers.Wrapper.image_shape">
<code class="descname">image_shape</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#nibabel.nicom.dicomwrappers.Wrapper.image_shape" title="Permalink to this definition">¶</a></dt>
<dd><p>The array shape as it will be returned by <code class="docutils literal"><span class="pre">get_data()</span></code></p>
</dd></dl>

<dl class="method">
<dt id="nibabel.nicom.dicomwrappers.Wrapper.instance_number">
<code class="descname">instance_number</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#nibabel.nicom.dicomwrappers.Wrapper.instance_number" title="Permalink to this definition">¶</a></dt>
<dd><p>Just because we use this a lot for sorting</p>
</dd></dl>

<dl class="attribute">
<dt id="nibabel.nicom.dicomwrappers.Wrapper.is_csa">
<code class="descname">is_csa</code><em class="property"> = False</em><a class="headerlink" href="#nibabel.nicom.dicomwrappers.Wrapper.is_csa" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="nibabel.nicom.dicomwrappers.Wrapper.is_mosaic">
<code class="descname">is_mosaic</code><em class="property"> = False</em><a class="headerlink" href="#nibabel.nicom.dicomwrappers.Wrapper.is_mosaic" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="attribute">
<dt id="nibabel.nicom.dicomwrappers.Wrapper.is_multiframe">
<code class="descname">is_multiframe</code><em class="property"> = False</em><a class="headerlink" href="#nibabel.nicom.dicomwrappers.Wrapper.is_multiframe" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="nibabel.nicom.dicomwrappers.Wrapper.is_same_series">
<code class="descname">is_same_series</code><span class="sig-paren">(</span><em>other</em><span class="sig-paren">)</span><a class="headerlink" href="#nibabel.nicom.dicomwrappers.Wrapper.is_same_series" title="Permalink to this definition">¶</a></dt>
<dd><p>Return True if <cite>other</cite> appears to be in same series</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>other</strong> : object</p>
<blockquote>
<div><p>object with <code class="docutils literal"><span class="pre">series_signature</span></code> attribute that is a
mapping.  Usually it&#8217;s a <code class="docutils literal"><span class="pre">Wrapper</span></code> or sub-class instance.</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>tf</strong> : bool</p>
<blockquote class="last">
<div><p>True if <cite>other</cite> might be in the same series as <cite>self</cite>, False
otherwise.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="attribute">
<dt id="nibabel.nicom.dicomwrappers.Wrapper.q_vector">
<code class="descname">q_vector</code><em class="property"> = None</em><a class="headerlink" href="#nibabel.nicom.dicomwrappers.Wrapper.q_vector" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="nibabel.nicom.dicomwrappers.Wrapper.rotation_matrix">
<code class="descname">rotation_matrix</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#nibabel.nicom.dicomwrappers.Wrapper.rotation_matrix" title="Permalink to this definition">¶</a></dt>
<dd><p>Return rotation matrix between array indices and mm</p>
<p>Note that we swap the two columns of the &#8216;ImageOrientPatient&#8217;
when we create the rotation matrix.  This is takes into account
the slightly odd ij transpose construction of the DICOM
orientation fields - see doc/theory/dicom_orientaiton.rst.</p>
</dd></dl>

<dl class="method">
<dt id="nibabel.nicom.dicomwrappers.Wrapper.series_signature">
<code class="descname">series_signature</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#nibabel.nicom.dicomwrappers.Wrapper.series_signature" title="Permalink to this definition">¶</a></dt>
<dd><p>Signature for matching slices into series</p>
<p>We use <cite>signature</cite> in <code class="docutils literal"><span class="pre">self.is_same_series(other)</span></code>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>signature</strong> : dict</p>
<blockquote class="last">
<div><p>with values of 2-element sequences, where first element is
value, and second element is function to compare this value
with another.  This allows us to pass things like arrays,
that might need to be <code class="docutils literal"><span class="pre">allclose</span></code> instead of equal</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="nibabel.nicom.dicomwrappers.Wrapper.slice_indicator">
<code class="descname">slice_indicator</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#nibabel.nicom.dicomwrappers.Wrapper.slice_indicator" title="Permalink to this definition">¶</a></dt>
<dd><p>A number that is higher for higher slices in Z</p>
<p>Comparing this number between two adjacent slices should give a
difference equal to the voxel size in Z.</p>
<p>See doc/theory/dicom_orientation for description</p>
</dd></dl>

<dl class="method">
<dt id="nibabel.nicom.dicomwrappers.Wrapper.slice_normal">
<code class="descname">slice_normal</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#nibabel.nicom.dicomwrappers.Wrapper.slice_normal" title="Permalink to this definition">¶</a></dt>
<dd></dd></dl>

<dl class="method">
<dt id="nibabel.nicom.dicomwrappers.Wrapper.voxel_sizes">
<code class="descname">voxel_sizes</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#nibabel.nicom.dicomwrappers.Wrapper.voxel_sizes" title="Permalink to this definition">¶</a></dt>
<dd><p>voxel sizes for array as returned by <code class="docutils literal"><span class="pre">get_data()</span></code></p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="wrappererror">
<h3><a class="reference internal" href="#nibabel.nicom.dicomwrappers.WrapperError" title="nibabel.nicom.dicomwrappers.WrapperError"><code class="xref py py-class docutils literal"><span class="pre">WrapperError</span></code></a><a class="headerlink" href="#wrappererror" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="nibabel.nicom.dicomwrappers.WrapperError">
<em class="property">class </em><code class="descclassname">nibabel.nicom.dicomwrappers.</code><code class="descname">WrapperError</code><a class="headerlink" href="#nibabel.nicom.dicomwrappers.WrapperError" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">exceptions.Exception</span></code></p>
<dl class="method">
<dt id="nibabel.nicom.dicomwrappers.WrapperError.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#nibabel.nicom.dicomwrappers.WrapperError.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>x.__init__(...) initializes x; see help(type(x)) for signature</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="wrapperprecisionerror">
<h3><a class="reference internal" href="#nibabel.nicom.dicomwrappers.WrapperPrecisionError" title="nibabel.nicom.dicomwrappers.WrapperPrecisionError"><code class="xref py py-class docutils literal"><span class="pre">WrapperPrecisionError</span></code></a><a class="headerlink" href="#wrapperprecisionerror" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="nibabel.nicom.dicomwrappers.WrapperPrecisionError">
<em class="property">class </em><code class="descclassname">nibabel.nicom.dicomwrappers.</code><code class="descname">WrapperPrecisionError</code><a class="headerlink" href="#nibabel.nicom.dicomwrappers.WrapperPrecisionError" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#nibabel.nicom.dicomwrappers.WrapperError" title="nibabel.nicom.dicomwrappers.WrapperError"><code class="xref py py-class docutils literal"><span class="pre">nibabel.nicom.dicomwrappers.WrapperError</span></code></a></p>
<dl class="method">
<dt id="nibabel.nicom.dicomwrappers.WrapperPrecisionError.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="headerlink" href="#nibabel.nicom.dicomwrappers.WrapperPrecisionError.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>x.__init__(...) initializes x; see help(type(x)) for signature</p>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="none-or-close">
<h3>none_or_close<a class="headerlink" href="#none-or-close" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="nibabel.nicom.dicomwrappers.none_or_close">
<code class="descclassname">nibabel.nicom.dicomwrappers.</code><code class="descname">none_or_close</code><span class="sig-paren">(</span><em>val1</em>, <em>val2</em>, <em>rtol=1e-05</em>, <em>atol=1e-06</em><span class="sig-paren">)</span><a class="headerlink" href="#nibabel.nicom.dicomwrappers.none_or_close" title="Permalink to this definition">¶</a></dt>
<dd><p>Match if <cite>val1</cite> and <cite>val2</cite> are both None, or are close</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>val1</strong> : None or array-like</p>
<p><strong>val2</strong> : None or array-like</p>
<p><strong>rtol</strong> : float, optional</p>
<blockquote>
<div><p>Relative tolerance; see <code class="docutils literal"><span class="pre">np.allclose</span></code></p>
</div></blockquote>
<p><strong>atol</strong> : float, optional</p>
<blockquote>
<div><p>Absolute tolerance; see <code class="docutils literal"><span class="pre">np.allclose</span></code></p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>tf</strong> : bool</p>
<blockquote class="last">
<div><p>True iff (both <cite>val1</cite> and <cite>val2</cite> are None) or (<cite>val1</cite> and <cite>val2</cite>
are close arrays, as detected by <code class="docutils literal"><span class="pre">np.allclose</span></code> with parameters
<cite>rtol</cite> and <cite>atal</cite>).</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">none_or_close</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">none_or_close</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span> <span class="kc">None</span><span class="p">)</span>
<span class="go">False</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">none_or_close</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span>
<span class="go">False</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">none_or_close</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">],</span> <span class="p">[</span><span class="mi">1</span><span class="p">,</span><span class="mi">2</span><span class="p">])</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">none_or_close</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">],</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span><span class="mi">2</span><span class="p">])</span>
<span class="go">False</span>
</pre></div>
</div>
</dd></dl>

</div>
<div class="section" id="wrapper-from-data">
<h3>wrapper_from_data<a class="headerlink" href="#wrapper-from-data" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="nibabel.nicom.dicomwrappers.wrapper_from_data">
<code class="descclassname">nibabel.nicom.dicomwrappers.</code><code class="descname">wrapper_from_data</code><span class="sig-paren">(</span><em>dcm_data</em><span class="sig-paren">)</span><a class="headerlink" href="#nibabel.nicom.dicomwrappers.wrapper_from_data" title="Permalink to this definition">¶</a></dt>
<dd><p>Create DICOM wrapper from DICOM data object</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>dcm_data</strong> : <code class="docutils literal"><span class="pre">dicom.dataset.Dataset</span></code> instance or similar</p>
<blockquote>
<div><p>Object allowing attribute access, with DICOM attributes.
Probably a dataset as read by <code class="docutils literal"><span class="pre">pydicom</span></code>.</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>dcm_w</strong> : <code class="docutils literal"><span class="pre">dicomwrappers.Wrapper</span></code> or subclass</p>
<blockquote class="last">
<div><p>DICOM wrapper corresponding to DICOM data type</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="wrapper-from-file">
<h3>wrapper_from_file<a class="headerlink" href="#wrapper-from-file" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="nibabel.nicom.dicomwrappers.wrapper_from_file">
<code class="descclassname">nibabel.nicom.dicomwrappers.</code><code class="descname">wrapper_from_file</code><span class="sig-paren">(</span><em>file_like</em>, <em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="headerlink" href="#nibabel.nicom.dicomwrappers.wrapper_from_file" title="Permalink to this definition">¶</a></dt>
<dd><p>Create DICOM wrapper from <cite>file_like</cite> object</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>file_like</strong> : object</p>
<blockquote>
<div><p>filename string or file-like object, pointing to a valid DICOM
file readable by <code class="docutils literal"><span class="pre">pydicom</span></code></p>
</div></blockquote>
<p><strong>*args</strong> : positional</p>
<blockquote>
<div><p>args to <code class="docutils literal"><span class="pre">dicom.read_file</span></code> command.</p>
</div></blockquote>
<p><strong>**kwargs</strong> : keyword</p>
<blockquote>
<div><p>args to <code class="docutils literal"><span class="pre">dicom.read_file</span></code> command.  <code class="docutils literal"><span class="pre">force=True</span></code> might be a
likely keyword argument.</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>dcm_w</strong> : <code class="docutils literal"><span class="pre">dicomwrappers.Wrapper</span></code> or subclass</p>
<blockquote class="last">
<div><p>DICOM wrapper corresponding to DICOM data type</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="b2q">
<h3>B2q<a class="headerlink" href="#b2q" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="nibabel.nicom.dwiparams.B2q">
<code class="descclassname">nibabel.nicom.dwiparams.</code><code class="descname">B2q</code><span class="sig-paren">(</span><em>B</em>, <em>tol=None</em><span class="sig-paren">)</span><a class="headerlink" href="#nibabel.nicom.dwiparams.B2q" title="Permalink to this definition">¶</a></dt>
<dd><p>Estimate q vector from input B matrix <cite>B</cite></p>
<p>We require that the input <cite>B</cite> is symmetric positive definite.</p>
<p>Because the solution is a square root, the sign of the returned
vector is arbitrary.  We set the vector to have a positive x
component by convention.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>B</strong> : (3,3) array-like</p>
<blockquote>
<div><p>B matrix - symmetric. We do not check the symmetry.</p>
</div></blockquote>
<p><strong>tol</strong> : None or float</p>
<blockquote>
<div><p>absolute tolerance below which to consider eigenvalues of the B
matrix to be small enough not to worry about them being negative,
in check for positive semi-definite-ness.  None (default) results
in a fairly tight numerical threshold proportional to the maximum
eigenvalue</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>q</strong> : (3,) vector</p>
<blockquote class="last">
<div><p>Estimated q vector from B matrix <cite>B</cite></p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
<div class="section" id="nearest-pos-semi-def">
<h3>nearest_pos_semi_def<a class="headerlink" href="#nearest-pos-semi-def" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="nibabel.nicom.dwiparams.nearest_pos_semi_def">
<code class="descclassname">nibabel.nicom.dwiparams.</code><code class="descname">nearest_pos_semi_def</code><span class="sig-paren">(</span><em>B</em><span class="sig-paren">)</span><a class="headerlink" href="#nibabel.nicom.dwiparams.nearest_pos_semi_def" title="Permalink to this definition">¶</a></dt>
<dd><p>Least squares positive semi-definite tensor estimation</p>
<p>Reference: Niethammer M, San Jose Estepar R, Bouix S, Shenton M,
Westin CF.  On diffusion tensor estimation. Conf Proc IEEE Eng Med
Biol Soc.  2006;1:2622-5. PubMed PMID: 17946125; PubMed Central
PMCID: PMC2791793.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>B</strong> : (3,3) array-like</p>
<blockquote>
<div><p>B matrix - symmetric. We do not check the symmetry.</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>npds</strong> : (3,3) array</p>
<blockquote class="last">
<div><p>Estimated nearest positive semi-definite array to matrix <cite>B</cite>.</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">B</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">diag</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">1</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">])</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">nearest_pos_semi_def</span><span class="p">(</span><span class="n">B</span><span class="p">)</span>
<span class="go">array([[ 0.75,  0.  ,  0.  ],</span>
<span class="go">       [ 0.  ,  0.75,  0.  ],</span>
<span class="go">       [ 0.  ,  0.  ,  0.  ]])</span>
</pre></div>
</div>
</dd></dl>

</div>
<div class="section" id="q2bg">
<h3>q2bg<a class="headerlink" href="#q2bg" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="nibabel.nicom.dwiparams.q2bg">
<code class="descclassname">nibabel.nicom.dwiparams.</code><code class="descname">q2bg</code><span class="sig-paren">(</span><em>q_vector</em>, <em>tol=1e-05</em><span class="sig-paren">)</span><a class="headerlink" href="#nibabel.nicom.dwiparams.q2bg" title="Permalink to this definition">¶</a></dt>
<dd><p>Return b value and q unit vector from q vector <cite>q_vector</cite></p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>q_vector</strong> : (3,) array-like</p>
<blockquote>
<div><p>q vector</p>
</div></blockquote>
<p><strong>tol</strong> : float, optional</p>
<blockquote>
<div><p>q vector L2 norm below which <cite>q_vector</cite> considered to be <cite>b_value</cite> of
zero, and therefore <cite>g_vector</cite> also considered to zero.</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>b_value</strong> : float</p>
<blockquote>
<div><p>L2 Norm of <cite>q_vector</cite> or 0 if L2 norm &lt; <cite>tol</cite></p>
</div></blockquote>
<p><strong>g_vector</strong> : shape (3,) ndarray</p>
<blockquote class="last">
<div><p><cite>q_vector</cite> / <cite>b_value</cite> or 0 if L2 norma &lt; <cite>tol</cite></p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<p class="rubric">Examples</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">q2bg</span><span class="p">([</span><span class="mi">1</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">])</span>
<span class="go">(1.0, array([ 1.,  0.,  0.]))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">q2bg</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="mi">0</span><span class="p">])</span>
<span class="go">(10.0, array([ 0.,  1.,  0.]))</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">q2bg</span><span class="p">([</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">])</span>
<span class="go">(0.0, array([ 0.,  0.,  0.]))</span>
</pre></div>
</div>
</dd></dl>

</div>
<div class="section" id="unpacker">
<h3><a class="reference internal" href="#nibabel.nicom.structreader.Unpacker" title="nibabel.nicom.structreader.Unpacker"><code class="xref py py-class docutils literal"><span class="pre">Unpacker</span></code></a><a class="headerlink" href="#unpacker" title="Permalink to this headline">¶</a></h3>
<dl class="class">
<dt id="nibabel.nicom.structreader.Unpacker">
<em class="property">class </em><code class="descclassname">nibabel.nicom.structreader.</code><code class="descname">Unpacker</code><span class="sig-paren">(</span><em>buf</em>, <em>ptr=0</em>, <em>endian=None</em><span class="sig-paren">)</span><a class="headerlink" href="#nibabel.nicom.structreader.Unpacker" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal"><span class="pre">object</span></code></p>
<p>Class to unpack values from buffer object</p>
<p>The buffer object is usually a string. Caches compiled <code class="xref py py-mod docutils literal"><span class="pre">struct</span></code>
format strings so that repeated unpacking with the same format
string should be faster than using <code class="docutils literal"><span class="pre">struct.unpack</span></code> directly.</p>
<p class="rubric">Examples</p>
<div class="highlight-default"><div class="highlight"><pre><span></span><span class="gp">&gt;&gt;&gt; </span><span class="n">a</span> <span class="o">=</span> <span class="n">b</span><span class="s1">&#39;1234567890&#39;</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">upk</span> <span class="o">=</span> <span class="n">Unpacker</span><span class="p">(</span><span class="n">a</span><span class="p">)</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">upk</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="s1">&#39;2s&#39;</span><span class="p">)</span> <span class="o">==</span> <span class="p">(</span><span class="n">b</span><span class="s1">&#39;12&#39;</span><span class="p">,)</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">upk</span><span class="o">.</span><span class="n">unpack</span><span class="p">(</span><span class="s1">&#39;2s&#39;</span><span class="p">)</span> <span class="o">==</span> <span class="p">(</span><span class="n">b</span><span class="s1">&#39;34&#39;</span><span class="p">,)</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">upk</span><span class="o">.</span><span class="n">ptr</span>
<span class="go">4</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">upk</span><span class="o">.</span><span class="n">read</span><span class="p">(</span><span class="mi">3</span><span class="p">)</span> <span class="o">==</span> <span class="n">b</span><span class="s1">&#39;567&#39;</span>
<span class="go">True</span>
<span class="gp">&gt;&gt;&gt; </span><span class="n">upk</span><span class="o">.</span><span class="n">ptr</span>
<span class="go">7</span>
</pre></div>
</div>
<p>Initialize unpacker</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>buf</strong> : buffer</p>
<blockquote>
<div><p>object implementing buffer protocol (e.g. str)</p>
</div></blockquote>
<p><strong>ptr</strong> : int, optional</p>
<blockquote>
<div><p>offset at which to begin reads from <cite>buf</cite></p>
</div></blockquote>
<p><strong>endian</strong> : None or str, optional</p>
<blockquote class="last">
<div><p>endian code to prepend to format, as for <code class="docutils literal"><span class="pre">unpack</span></code> endian
codes.  None (the default) corresponds to the default
behavior of <code class="docutils literal"><span class="pre">struct</span></code> - assuming system endian unless you
specify the byte order specifically in the format string
passed to <code class="docutils literal"><span class="pre">unpack</span></code></p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
<dl class="method">
<dt id="nibabel.nicom.structreader.Unpacker.__init__">
<code class="descname">__init__</code><span class="sig-paren">(</span><em>buf</em>, <em>ptr=0</em>, <em>endian=None</em><span class="sig-paren">)</span><a class="headerlink" href="#nibabel.nicom.structreader.Unpacker.__init__" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialize unpacker</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>buf</strong> : buffer</p>
<blockquote>
<div><p>object implementing buffer protocol (e.g. str)</p>
</div></blockquote>
<p><strong>ptr</strong> : int, optional</p>
<blockquote>
<div><p>offset at which to begin reads from <cite>buf</cite></p>
</div></blockquote>
<p><strong>endian</strong> : None or str, optional</p>
<blockquote class="last">
<div><p>endian code to prepend to format, as for <code class="docutils literal"><span class="pre">unpack</span></code> endian
codes.  None (the default) corresponds to the default
behavior of <code class="docutils literal"><span class="pre">struct</span></code> - assuming system endian unless you
specify the byte order specifically in the format string
passed to <code class="docutils literal"><span class="pre">unpack</span></code></p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="nibabel.nicom.structreader.Unpacker.read">
<code class="descname">read</code><span class="sig-paren">(</span><em>n_bytes=-1</em><span class="sig-paren">)</span><a class="headerlink" href="#nibabel.nicom.structreader.Unpacker.read" title="Permalink to this definition">¶</a></dt>
<dd><p>Return byte string of length <cite>n_bytes</cite> at current position</p>
<p>Returns sub-string from <code class="docutils literal"><span class="pre">self.buf</span></code> and updates <code class="docutils literal"><span class="pre">self.ptr</span></code> to the
position after the read data.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>n_bytes</strong> : int, optional</p>
<blockquote>
<div><p>number of bytes to read.  Can be -1 (the default) in which
case we return all the remaining bytes in <code class="docutils literal"><span class="pre">self.buf</span></code></p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><strong>s</strong> : byte string</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="nibabel.nicom.structreader.Unpacker.unpack">
<code class="descname">unpack</code><span class="sig-paren">(</span><em>fmt</em><span class="sig-paren">)</span><a class="headerlink" href="#nibabel.nicom.structreader.Unpacker.unpack" title="Permalink to this definition">¶</a></dt>
<dd><p>Unpack values from contained buffer</p>
<p>Unpacks values from <code class="docutils literal"><span class="pre">self.buf</span></code> and updates <code class="docutils literal"><span class="pre">self.ptr</span></code> to the
position after the read data.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>fmt</strong> : str</p>
<blockquote>
<div><p>format string as for <code class="docutils literal"><span class="pre">unpack</span></code></p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>values</strong> : tuple</p>
<blockquote class="last">
<div><p>values as unpacked from <code class="docutils literal"><span class="pre">self.buf</span></code> according to <cite>fmt</cite></p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

</div>
<div class="section" id="find-private-section">
<h3>find_private_section<a class="headerlink" href="#find-private-section" title="Permalink to this headline">¶</a></h3>
<dl class="function">
<dt id="nibabel.nicom.utils.find_private_section">
<code class="descclassname">nibabel.nicom.utils.</code><code class="descname">find_private_section</code><span class="sig-paren">(</span><em>dcm_data</em>, <em>group_no</em>, <em>creator</em><span class="sig-paren">)</span><a class="headerlink" href="#nibabel.nicom.utils.find_private_section" title="Permalink to this definition">¶</a></dt>
<dd><p>Return start element in group <cite>group_no</cite> given creator name <cite>creator</cite></p>
<p>Private attribute tags need to announce where they will go by putting a tag
in the private group (here <cite>group_no</cite>) between elements 1 and 0xFF.  The
element number of these tags give the start of matching information, in the
higher tag numbers.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><p class="first"><strong>dcm_data</strong> : dicom <code class="docutils literal"><span class="pre">dataset</span></code></p>
<blockquote>
<div><p>Iterating over <cite>dcm_data</cite> produces <code class="docutils literal"><span class="pre">elements</span></code> with attributes
<code class="docutils literal"><span class="pre">tag</span></code>, <code class="docutils literal"><span class="pre">VR</span></code>, <code class="docutils literal"><span class="pre">value</span></code></p>
</div></blockquote>
<p><strong>group_no</strong> : int</p>
<blockquote>
<div><p>Group number in which to search</p>
</div></blockquote>
<p><strong>creator</strong> : str or bytes or regex</p>
<blockquote>
<div><p>Name of section - e.g. &#8216;SIEMENS CSA HEADER&#8217; - or regex to search for
section name.  Regex used via <code class="docutils literal"><span class="pre">creator.search(element_value)</span></code> where
<code class="docutils literal"><span class="pre">element_value</span></code> is the value of the data element.</p>
</div></blockquote>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first"><strong>element_start</strong> : int</p>
<blockquote class="last">
<div><p>Element number at which named section starts</p>
</div></blockquote>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="footer" role="contentinfo">
        &#169; Copyright 2006-2016, Matthew Brett, Michael Hanke, Eric Larson, Chris Markiewicz &lt;neuroimaging@python.org&gt;.
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.4.6.
    </div>
  </body>
</html>